@layer components {
  .note__templateContent {
    & > :not(:first-child) {
      @apply mbs-2;
    }
    & :is(ul, ol) {
      @apply mis-4;
    }
    & ul {
      @apply list-disc;
    }
  }

  /* Heading permalinks generated by markdown-it-anchor */
  .heading-wrapper {
    @apply flex items-baseline gap-2 sm:gap-0 sm:-mis-5;
  }
  .heading-wrapper.heading-wrapper + p {
    /* top margin doesn't collapse with preceding paragraph because of flex */
    margin-block-start: 0;
  }
  p:has(+ .heading-wrapper.heading-wrapper) {
    /* bottom margin doesn't collapse with preceding paragraph because of flex */
    margin-block-end: 0;
  }
  .heading-wrapper > :is(h1, h2, h3, h4, h5, h6) {
    @apply rounded ring-theme-600 ring-offset-2 ring-offset-white dark:ring-offset-gray-900;
  }
  :is(h1, h2, h3, h4, h5, h6):target {
    @apply outline-none;
  }
  :is(h1, h2, h3, h4, h5, h6):has(+ .heading-anchor:focus-visible) {
    @apply bg-theme-100 ring dark:bg-theme-900;
  }
  .heading-anchor {
    @apply text-2xl font-bold no-underline opacity-10 focus-visible:ring-0 sm:order-first sm:is-5;
  }
  :hover > .heading-anchor,
  :target + .heading-anchor,
  .heading-anchor:is(:focus-visible) {
    @apply bg-transparent text-theme-700 opacity-100 dark:text-theme-500;
  }
}
